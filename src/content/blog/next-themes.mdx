---
title: Implement light/dark/system theme modes in NextJS13 with Tailwind CSS.
author: Nisab Mohd
description: Themes, such as dark and light modes, are crucial today as they enhance user comfort, save battery life, and improve accessibility by allowing users to adapt the interface to their preferences and lighting conditions.
published: 1696353617886
slug: next-theme
tags:
  - nextjs
  - theme
  - react
  - RSC
---

Themes, such as dark and light modes, are crucial today as they enhance user comfort, save battery life, and improve accessibility by allowing users to adapt the interface to their preferences and lighting conditions.

NextJS13 supports server components so we can use client data in server components ie using **Context**. In order to use theme across the app we can use Tailwind classes **dark** which specifies how the content should be looked in light or dark modes. But Tailwind understands current color scheme by checking the parent that has class called dark. in our case we need use <Highlight>className="dark"</Highlight> in
html **<NoWrap>(ie layout.tsx)</NoWrap>**.

We can use <Highlight>next-theme</Highlight> package that take cares of all the logic behind the local storage key and html className toggling.
Inorder to get started with this package need to install the package by command <Highlight>npm i next-themes</Highlight>. once its is installed we need to wrap our layout body with context provided by next-themes package.

But as we know in server components we cant use components which are directly using hooks so we need to create other component and then wrap our app with it.

```tsx:src/components/theme-provider.tsx showLineNumbers
"use client";

import { ThemeProvider as NextThemesProvider } from "next-themes";
import { type ThemeProviderProps } from "next-themes/dist/types";

export function ThemeProvider({ children, ...props }: ThemeProviderProps) {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>;
}

```

The component which created is a client component and can ne used in our layout file to wrap our app. lets first go to <Highlight>tailwind.config.ts</Highlight> and add the **darkMode** property in it.

```ts:tailwind.config.ts showLineNumbers {2}
module.exports = {
  darkMode: "class", // important
  content: [... ],
}
```

Now wrap the layout with custom component which we just made.

```tsx:app/layout.tsx showLineNumbers {5,8}
export default function RootLayout({children,}: {children: React.ReactNode}) {
  return (
    <html lang="en">
      <body className="dark:bg-zinc-950 dark:text-slate-200">
        <ThemeProvider attribute="class" defaultTheme="system">
         {/* attribute is mandatory and defaultTheme can be provided */}
            {children}
        </ThemeProvider>
      </body>
    </html>
  );
}
```

You can create a component that toggles the current theme by using the hook called <Highlight>useTheme</Highlight> provided by **next-themes**.

```tsx:src/components/theme-toggler.tsx showLineNumbers {7-12}
"use client"

import { useTheme } from "next-themes";
import { useEffect, useState } from "react";

export default function ThemeMode() {
  const { theme, setTheme } = useTheme();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  if (!mounted) return null;

  return (
    <div className="flex flex-row gap-1 items-center">
      <button onClick={() => setTheme("light")}>light </button>
      <button onClick={() => setTheme("system")}>system </button>
      <button onClick={() => setTheme("dark")}>dark </button>
    </div>
  );
}
```

The **mounted** part needs to be there which is highlighted in above code if not there will be glitch or hydration error. Now you can start the dev server and check the default mode is already there as theme mode.
And also you can toggle it. but when you open console you can see error that html has now new attribute that was not produced by server rendering, this is hydration error that next-themes is adding that **className** property to **html** document that was not on server side rendering. to avoid this you can mark your html in layout file with <Highlight>suppressHydraitonWarning</Highlight>, this is provided by react to solve issue for hydration error in some cases.

```tsx:app/layout.tsx showLineNumbers {3}
export default function RootLayout({children}: {children: React.ReactNode}) {
  return (
    <html lang="en" suppressHydraitonWarning>
      <body className="dark:bg-zinc-950 dark:text-slate-200">
        <ThemeProvider attribute="class" defaultTheme="system">
            {children}
        </ThemeProvider>
      </body>
    </html>
  );
}
```

Now the dark/light/system theme modes can be applied easily.
